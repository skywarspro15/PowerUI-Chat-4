<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/satoshi.css" />
    <title>Chats</title>
  </head>
  <body>
    <p hidden id="chatOpen">False</p>
    <div class="chatsMenu">
      <div class="chatInfo" id="chatList">
        <div class="header">
          <h2>Chats</h2>
          <div class="chatOptions">
            <button class="button" onclick="setStatusUI()">Add status</button>
            <button class="button" onclick="newUser()">Add people</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal hidden" id="statusUI">
      <div class="modal-content">
        <span class="close" onclick="hideModal('statusUI');">&times;</span>
        <h2 id="statusGreeting"></h2>
        <p>Type in your status:</p>
        <input type="text" id="statusText" /> <br />
        <br />

        <button class="button" onclick="saveStatus();">Set status</button>
      </div>
    </div>
    <div class="modal hidden" id="newUser">
      <div class="modal-content">
        <span class="close" onclick="hideModal('newUser');">&times;</span>
        <h2>Pick one of these users you can message:</h2>
        <div class="list">
          <ul id="userList">
            <li class="curUser"><a>Loading...</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="javascript:closeChat();" class="exitChat hidden" id="exitButton"
      ><strong>&lt;</strong> Go back</a
    >
    <iframe
      class="chat-frame hidden"
      id="curFrame"
      width="1280"
      height="720"
    ></iframe>
  </body>
  <script src="script.js"></script>
  <script>
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    if (urlParams.get("new") == "True") {
      window.history.pushState("", "", "/chats.html");
      newUser();
    }
    getMessages();
  </script>
</html>
